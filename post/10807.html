<!DOCTYPE html><html lang=zh-CN><head><meta charset=UTF-8><meta name=viewport content="width=device-width"><meta name=theme-color content=#222 media="(prefers-color-scheme: light)"><meta name=theme-color content=#222 media="(prefers-color-scheme: dark)"><meta name=generator content="Hexo 6.2.0"><link rel=preconnect href=https://fonts.googleapis.com crossorigin><link rel=preconnect href=https://cdnjs.cloudflare.com crossorigin><link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon-next.png><link rel=icon type=image/png sizes=32x32 href=/favicon.ico><link rel=icon type=image/png sizes=16x16 href=/favicon.ico><link rel=mask-icon href=/images/logo.svg color=#222><meta name=baidu-site-verification content=WIIeufYjj6><link rel=stylesheet href=/css/main.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Microsoft+YaHei:300,300italic,400,400italic,700,700italic%7Ccmmi10:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css integrity="sha256-DfWjNxDkM94fVBWx1H5BMMp0Zq7luBlV8QRcSES7s+0=" crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin=anonymous><script class=next-config data-name=main type=application/json>{"hostname":"winddoing.github.io","root":"/","images":"/images","scheme":"Mist","darkmode":true,"version":"8.12.1","exturl":true,"sidebar":{"position":"right","display":"post","padding":18,"offset":12},"copycode":{"enable":true,"style":"default"},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":true,"pangu":true,"comments":{"style":"tabs","active":"utterances","storage":true,"lazyload":false,"nav":null,"activeClass":"utterances"},"stickytabs":false,"motion":{"enable":true,"async":true,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src=/js/config.js></script><meta name=description content="CGroup 是 Control Groups 的缩写，是 Linux 内核提供的一种可以限制、记录、隔离进程组 (process groups) 所使用的物力资源 (如 cpu memory i&#x2F;o 等等) 的机制。 CGroup 是将任意进程进行分组化管理的 Linux 内核功能。CGroup 本身是提供将进程进行分组化管理的功能和接口的基础结构，I&#x2F;O 或内存的分配控制等"><meta property=og:type content=article><meta property=og:title content=Cgroup><meta property=og:url content=https://winddoing.github.io/post/10807.html><meta property=og:site_name content="Winddoing&#39;s Notes"><meta property=og:description content="CGroup 是 Control Groups 的缩写，是 Linux 内核提供的一种可以限制、记录、隔离进程组 (process groups) 所使用的物力资源 (如 cpu memory i&#x2F;o 等等) 的机制。 CGroup 是将任意进程进行分组化管理的 Linux 内核功能。CGroup 本身是提供将进程进行分组化管理的功能和接口的基础结构，I&#x2F;O 或内存的分配控制等"><meta property=og:locale content=zh_CN><meta property=og:image content=https://winddoing.github.io/images/cgroup/cgroup_tree.jpeg><meta property=og:image content=https://winddoing.github.io/images/cgroup/cgroup_struct.jpeg><meta property=article:published_time content=2018-02-28T15:07:24.000Z><meta property=article:modified_time content=2023-12-16T04:58:17.937Z><meta property=article:author content=winddoing><meta property=article:tag content=linux><meta property=article:tag content=cgroup><meta name=twitter:card content=summary><meta name=twitter:image content=https://winddoing.github.io/images/cgroup/cgroup_tree.jpeg><link rel=canonical href=https://winddoing.github.io/post/10807.html><script class=next-config data-name=page type=application/json>{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://winddoing.github.io/post/10807.html","path":"post/10807.html","title":"Cgroup"}</script><script class=next-config data-name=calendar type=application/json>""</script><title>Cgroup | Winddoing's Notes</title><script src=/js/third-party/analytics/baidu-analytics.js></script><script async src=https://hm.baidu.com/hm.js?b96a560ce0a6bfbeaaddc59dc5888b75></script><noscript><link rel=stylesheet href=/css/noscript.css></noscript></head><body itemscope itemtype=http://schema.org/WebPage class=use-motion><div class=headband></div><main class=main><header class=header itemscope itemtype=http://schema.org/WPHeader><div class=header-inner><div class=site-brand-container><div class=site-nav-toggle><div class=toggle aria-label=切换导航栏 role=button><span class=toggle-line></span> <span class=toggle-line></span> <span class=toggle-line></span></div></div><div class=site-meta><a href="/" class=brand rel=start><i class=logo-line></i><p class=site-title>Winddoing's Notes</p><i class=logo-line></i></a><p class=site-subtitle itemprop=description>Follow Excellent, Success will Chase you</p></div><div class=site-nav-right><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class=site-nav><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel=section><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel=section><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel=section><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel=section><i class="fa fa-archive fa-fw"></i>归档</a></li><li class="menu-item menu-item-search"><a role=button class=popup-trigger><i class="fa fa-search fa-fw"></i>搜索</a></li></ul></nav><div class=search-pop-overlay><div class="popup search-popup"><div class=search-header><span class=search-icon><i class="fa fa-search"></i></span><div class=search-input-container><input autocomplete=off autocapitalize=off maxlength=80 placeholder=搜索... spellcheck=false type=search class=search-input></div><span class=popup-btn-close role=button><i class="fa fa-times-circle"></i></span></div><div class="search-result-container no-result"><div class=search-result-icon><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></div><div class="toggle sidebar-toggle" role=button><span class=toggle-line></span> <span class=toggle-line></span> <span class=toggle-line></span></div><aside class=sidebar><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class=sidebar-nav><li class=sidebar-nav-toc>文章目录</li><li class=sidebar-nav-overview>站点概览</li></ul><div class=sidebar-panel-container><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><ol class=nav><li class="nav-item nav-level-2"><a class=nav-link href=#Cgroup%E8%99%9A%E6%8B%9F%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F><span class=nav-number>1.</span> <span class=nav-text>Cgroup虚拟文件系统</span></a></li><li class="nav-item nav-level-2"><a class=nav-link href=#%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5><span class=nav-number>2.</span> <span class=nav-text>基础概念</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%85%B3%E7%B3%BB><span class=nav-number>2.1.</span> <span class=nav-text>关系</span></a></li></ol></li><li class="nav-item nav-level-2"><a class=nav-link href=#%E9%99%90%E5%88%B6cpu%E7%9A%84%E8%B5%84%E6%BA%90><span class=nav-number>3.</span> <span class=nav-text>限制cpu的资源</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%AE%9E%E6%97%B6%E8%BF%9B%E7%A8%8B%E6%8E%A7%E5%88%B6-%E2%80%93-%E7%B3%BB%E7%BB%9F%E6%95%B4%E4%BD%93><span class=nav-number>3.1.</span> <span class=nav-text>实时进程控制 – 系统整体</span></a></li><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%AE%9E%E6%97%B6%E8%BF%9B%E7%A8%8B%E6%8E%A7%E5%88%B6-%E2%80%93-%E7%B3%BB%E7%BB%9F%E9%83%A8%E5%88%86><span class=nav-number>3.2.</span> <span class=nav-text>实时进程控制 – 系统部分</span></a></li></ol></li><li class="nav-item nav-level-2"><a class=nav-link href=#%E9%99%90%E5%88%B6%E8%BF%9B%E7%A8%8B%E7%9A%84%E5%86%85%E5%AD%98%E8%B5%84%E6%BA%90><span class=nav-number>4.</span> <span class=nav-text>限制进程的内存资源</span></a></li><li class="nav-item nav-level-2"><a class=nav-link href=#%E8%BF%9B%E7%A8%8B%E8%BF%81%E7%A7%BB><span class=nav-number>5.</span> <span class=nav-text>进程迁移</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%BA%94%E7%94%A8%E5%AE%9E%E4%BE%8B><span class=nav-number>5.1.</span> <span class=nav-text>应用实例</span></a></li></ol></li><li class="nav-item nav-level-2"><a class=nav-link href=#%E5%8F%82%E8%80%83><span class=nav-number>6.</span> <span class=nav-text>参考</span></a></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author site-overview-item animated" itemprop=author itemscope itemtype=http://schema.org/Person><img class=site-author-image itemprop=image alt=winddoing src=/images/Winddoing.jpg><p class=site-author-name itemprop=name>winddoing</p><div class=site-description itemprop=description>失败缘于忽视细处，成功始于重视小事</div></div><div class="site-state-wrap site-overview-item animated"><nav class=site-state><div class="site-state-item site-state-posts"><a href="/archives/"><span class=site-state-item-count>358</span> <span class=site-state-item-name>日志</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/"><span class=site-state-item-count>112</span> <span class=site-state-item-name>分类</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/"><span class=site-state-item-count>284</span> <span class=site-state-item-name>标签</span></a></div></nav></div><div class="links-of-author site-overview-item animated"><span class=links-of-author-item><span class=exturl data-url="aHR0cHM6Ly9naXRodWIuY29tL1dpbmRkb2luZw==" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;Winddoing"><i class="fab fa-github fa-fw"></i>GitHub</span></span> <span class=links-of-author-item><span class=exturl data-url=aHR0cHM6Ly9naXRlZS5jb20vd2luZGRvaW5n title="Gitee → https:&#x2F;&#x2F;gitee.com&#x2F;winddoing"><i class="fab fa-codiepie fa-fw"></i>Gitee</span></span> <span class=links-of-author-item><span class=exturl data-url="aHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS91c2Vycy85NTY3MzYxL3dpbmRkb2luZw==" title="StackOverflow → https:&#x2F;&#x2F;stackoverflow.com&#x2F;users&#x2F;9567361&#x2F;winddoing"><i class="fab fa-stack-overflow fa-fw"></i>StackOverflow</span></span> <span class=links-of-author-item><span class=exturl data-url="aHR0cHM6Ly9hcHAudHJhdmlzLWNpLmNvbS9naXRodWIvV2luZGRvaW5nL3dpbmRkb2luZy5naXRodWIuaW8=" title="Travis CI → https:&#x2F;&#x2F;app.travis-ci.com&#x2F;github&#x2F;Winddoing&#x2F;winddoing.github.io"><i class="fas fa-terminal fa-fw"></i>Travis CI</span></span></div><div class="cc-license site-overview-item animated" itemprop=license><span class="exturl cc-opacity" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC8="><img src=https://cdnjs.cloudflare.com/ajax/libs/creativecommons-vocabulary/2020.11.3/assets/license_badges/small/by_nc_sa.svg alt="Creative Commons"></span></div><div class="links-of-blogroll site-overview-item animated"><div class=links-of-blogroll-title><i class="link fa-fw"></i> Links</div><ul class=links-of-blogroll-list><li class=links-of-blogroll-item><span class=exturl data-url="aHR0cHM6Ly93aW5kZG9pbmcuZ2l0Ym9vay5pby9lbWJlZGRlZF9saW51eF9ub3Rlcy8=" title=https:&#x2F;&#x2F;winddoing.gitbook.io&#x2F;embedded_linux_notes&#x2F;>嵌入式相关</span></li><li class=links-of-blogroll-item><span class=exturl data-url="aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc2RyZWFtcQ==" title=http:&#x2F;&#x2F;blog.csdn.net&#x2F;sdreamq>CSDN</span></li><li class=links-of-blogroll-item><span class=exturl data-url=aHR0cDovL3d3dy53b3dvdGVjaC5uZXQv title=http:&#x2F;&#x2F;www.wowotech.net&#x2F;>蜗窝科技</span></li><li class=links-of-blogroll-item><span class=exturl data-url=aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3hpb25neGlhbnpl title=https:&#x2F;&#x2F;blog.csdn.net&#x2F;xiongxianze>xiongxianze</span></li></ul></div><div id=days></div><script>
function show_date_time(){
    window.setTimeout("show_date_time()", 1000);
    BirthDay=new Date("02/26/2014 15:00:00");
    today=new Date();
    timeold=(today.getTime()-BirthDay.getTime());
    sectimeold=timeold/1000
        secondsold=Math.floor(sectimeold);
    msPerDay=24*60*60*1000
        e_daysold=timeold/msPerDay
        daysold=Math.floor(e_daysold);
    e_hrsold=(e_daysold-daysold)*24;
    hrsold=setzero(Math.floor(e_hrsold));
    e_minsold=(e_hrsold-hrsold)*60;
    minsold=setzero(Math.floor((e_hrsold-hrsold)*60));
    seconds=setzero(Math.floor((e_minsold-minsold)*60));
    document.getElementById('days').innerHTML="已运行"+daysold+"天"+hrsold+"小时"+minsold+"分"+seconds+"秒";
}
function setzero(i){
    if (i<10)
    {i="0" + i};
    return i;
}
show_date_time();
</script></div></div></div></aside><div class=sidebar-dimmer></div></header><div class=back-to-top role=button aria-label=返回顶部><i class="fa fa-arrow-up"></i> <span>0%</span></div><div class=reading-progress-bar></div><noscript><div class=noscript-warning>Theme NexT works best with JavaScript enabled</div></noscript><div class="main-inner post posts-expand"><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang=zh-CN><link itemprop=mainEntityOfPage href=https://winddoing.github.io/post/10807.html><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content=/images/Winddoing.jpg><meta itemprop=name content=winddoing></span> <span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="Winddoing's Notes"><meta itemprop=description content=失败缘于忽视细处，成功始于重视小事></span> <span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="Cgroup | Winddoing's Notes"><meta itemprop=description></span><header class=post-header><h1 class=post-title itemprop="name headline">Cgroup</h1><div class=post-meta-container><div class=post-meta><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-calendar"></i></span> <span class=post-meta-item-text>发表于</span><time title="创建时间：2018-02-28 23:07:24" itemprop="dateCreated datePublished" datetime=2018-02-28T23:07:24+08:00>2018-02-28</time></span> <span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-folder"></i></span> <span class=post-meta-item-text>分类于</span> <span itemprop=about itemscope itemtype=http://schema.org/Thing><a href="/categories/%E8%BF%9B%E7%A8%8B/" itemprop=url rel=index><span itemprop=name>进程</span></a></span> ， <span itemprop=about itemscope itemtype=http://schema.org/Thing><a href="/categories/%E8%BF%9B%E7%A8%8B/linux/" itemprop=url rel=index><span itemprop=name>linux</span></a></span></span> <span id=/post/10807.html class="post-meta-item leancloud_visitors" data-flag-title=Cgroup title=阅读次数><span class=post-meta-item-icon><i class="far fa-eye"></i></span> <span class=post-meta-item-text>阅读次数：</span> <span class=leancloud-visitors-count></span></span> <span class=post-meta-item title=阅读次数 id=busuanzi_container_page_pv><span class=post-meta-item-icon><i class="far fa-eye"></i></span> <span class=post-meta-item-text>阅读次数：</span> <span id=busuanzi_value_page_pv></span></span> <span class=post-meta-break></span> <span class=post-meta-item title=本文字数><span class=post-meta-item-icon><i class="far fa-file-word"></i></span> <span class=post-meta-item-text>本文字数：</span> <span>7.5k</span></span> <span class=post-meta-item title=阅读时长><span class=post-meta-item-icon><i class="far fa-clock"></i></span> <span class=post-meta-item-text>阅读时长 &asymp;</span> <span>7 分钟</span></span></div></div></header><div class=post-body itemprop=articleBody><p>CGroup 是 Control Groups 的缩写，是 Linux 内核提供的一种可以限制、记录、隔离进程组 (process groups) 所使用的物力资源 (如 cpu memory i&#x2F;o 等等) 的机制。</p><p>CGroup 是将任意进程进行分组化管理的 Linux 内核功能。CGroup 本身是提供将进程进行分组化管理的功能和接口的基础结构，I&#x2F;O 或内存的分配控制等具体的资源管理功能是通过这个功能来实现的。这些具体的资源管理功能称为 CGroup 子系统或控制器。CGroup 子系统有控制内存的 Memory 控制器、控制进程调度的 CPU 控制器等。运行中的内核可以使用的 Cgroup 子系统由<code>/proc/cgroup</code> 来确认，根据系统对资源的需求，这个根进程组将被进一步细分为子进程组，子进程组内的进程是根进程组内进程的子集。而这些子进程组很有可能继续被进一步细分，最终，系统内所有的进程组形成一颗具有层次等级（hierarchy）关系的进程组树。</p><p><img data-src=/images/cgroup/cgroup_tree.jpeg alt="cgroup tree"></p><span id=more></span><h2 id=Cgroup虚拟文件系统><a href=#Cgroup虚拟文件系统 class=headerlink title=Cgroup虚拟文件系统></a>Cgroup虚拟文件系统</h2><blockquote><p>CGroup 提供了一个 CGroup 虚拟文件系统，作为进行分组管理和各子系统设置的用户接口。要使用 CGroup，必须挂载 CGroup 文件系统。这时通过挂载选项指定使用哪个子系统。</p></blockquote><p><img data-src=/images/cgroup/cgroup_struct.jpeg alt="cgroup stru"></p><figure class="highlight shell"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br></pre></td><td class=code><pre><span class=line>[root@buildroot /]# mount -t cgroup cgroup /mnt/</span><br><span class=line>[root@buildroot /]# ls /mnt/</span><br><span class=line>blkio.reset_stats                cpuset.mem_exclusive</span><br><span class=line>cgroup.clone_children            cpuset.mem_hardwall</span><br><span class=line>cgroup.event_control             cpuset.memory_migrate</span><br><span class=line>cgroup.procs                     cpuset.memory_pressure</span><br><span class=line>cgroup.sane_behavior             cpuset.memory_pressure_enabled</span><br><span class=line>cpu.cfs_period_us                cpuset.memory_spread_page</span><br><span class=line>cpu.cfs_quota_us                 cpuset.memory_spread_slab</span><br><span class=line>cpu.rt_period_us                 cpuset.mems</span><br><span class=line>cpu.rt_runtime_us                cpuset.sched_load_balance</span><br><span class=line>cpu.shares                       cpuset.sched_relax_domain_level</span><br><span class=line>cpu.stat                         devices.allow</span><br><span class=line>cpuacct.stat                     devices.deny</span><br><span class=line>cpuacct.usage                    devices.list</span><br><span class=line>cpuacct.usage_percpu             notify_on_release</span><br><span class=line>cpuset.cpu_exclusive             release_agent</span><br><span class=line>cpuset.cpus                      tasks</span><br></pre></td></tr></table></figure><p>各个子系统的挂载：</p><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br></pre></td><td class=code><pre><span class=line>mount -t cgroup -o cpu cgroup /mnt/</span><br><span class=line>mount -t cgroup -o cpu,cpuset cgroup /mnt/</span><br><span class=line>mount -t cgroup -o cpu,cpuset,devices cgroup /mnt/</span><br></pre></td></tr></table></figure><p>CGroup 支持的文件种类:</p><table><thead><tr><th align=center>文件</th><th align=center>R&#x2F;W</th><th align=center>用途</th></tr></thead><tbody><tr><td align=center>release_agent</td><td align=center>RW</td><td align=center>删除分组时执行的命令，这个文件只存在于根分组</td></tr><tr><td align=center>notify_on_release</td><td align=center>RW</td><td align=center>设置是否执行 release_agent。为 1 时执行</td></tr><tr><td align=center>tasks</td><td align=center>RW</td><td align=center>属于分组的线程 TID 列表(进程ID)</td></tr><tr><td align=center>cgroup.procs</td><td align=center>R</td><td align=center>属于分组的进程 PID 列表。仅包括多线程进程的线程 leader 的 TID，这点与 tasks 不同</td></tr><tr><td align=center>cgroup.event_control</td><td align=center>RW</td><td align=center>监视状态变化和分组删除事件的配置文件</td></tr></tbody></table><h2 id=基础概念><a href=#基础概念 class=headerlink title=基础概念></a>基础概念</h2><ul><li>子系统（subsystem）<br>一个子系统就是一个资源控制器，比如 cpu 子系统就是控制 cpu 时间分配的一个控制器。子系统必须附加（attach）到一个层级上才能起作用，一个子系统附加到某个层级以后，这个层级上的所有控制族群都受到这个子系统的控制。<figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br></pre></td><td class=code><pre><span class=line>[root@buildroot ~]# cat /proc/cgroups</span><br><span class=line>#subsys_name      hierarchy       num_cgroups     enabled</span><br><span class=line>cpuset    1       1       1</span><br><span class=line>cpu       1       1       1</span><br><span class=line>cpuacct   1       1       1</span><br><span class=line>devices   1       1       1</span><br><span class=line>freezer   1       1       1</span><br><span class=line>blkio     1       1       1</span><br></pre></td></tr></table></figure><blockquote><p>Version: Linux-3.10.14</p></blockquote></li></ul><p>1.<code>cpuset</code>: 为cgroup中的任务分配独立CPU（SMP多核）和内存节点<br>2.<code>cpu</code>： 提供调度程序对CPU的cgroup任务访问<br>3.<code>cpuacct</code>： 自动生成cgroup中任务所使用的CPU报告<br>4.<code>devices</code>: 允许或拒绝cgroup中的任务访问设备<br>5.<code>freezer</code>：挂起或者恢复cgroup中的任务<br>6.<code>blkio</code>： 块设备输入输出的限制<br>7.<code>perf_event</code>： 增加了对每group的监测跟踪的能力，即可以监测属于某个特定的group的所有线程以及运行在特定CPU上的线程，此功能对于监测整个group非常有用，<span class=exturl data-url="aHR0cHM6Ly9sd24ubmV0L0FydGljbGVzLzQyMTU3NC8=">https://lwn.net/Articles/421574/<i class="fa fa-external-link-alt"></i></span></p><ul><li><p>层级（hierarchy）<br>控制族群可以组织成 hierarchical 的形式，既一颗控制族群树。控制族群树上的子节点控制族群是父节点控制族群的孩子，继承父控制族群的特定的属性；</p><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br></pre></td><td class=code><pre><span class=line>[root@buildroot ~]# cat /proc/cgroups</span><br><span class=line>#subsys_name      hierarchy       num_cgroups     enabled</span><br><span class=line>cpuset    0       1       1</span><br><span class=line>cpu       0       1       1</span><br><span class=line>cpuacct   0       1       1</span><br><span class=line>devices   0       1       1</span><br><span class=line>freezer   0       1       1</span><br><span class=line>blkio     0       1       1</span><br><span class=line>[root@buildroot ~]# mount -t cgroup -o cpu cgroup /mnt/cpu/</span><br><span class=line>[root@buildroot ~]# mount -t cgroup -o cpuset cgroup /mnt/cpuset/</span><br><span class=line>[root@buildroot ~]# mount -t cgroup -o devices cgroup /mnt/blkio/</span><br><span class=line>[root@buildroot ~]# mount -t cgroup -o blkio cgroup /mnt/blkio/</span><br><span class=line>[root@buildroot ~]# cat /proc/cgroups</span><br><span class=line>#subsys_name      hierarchy       num_cgroups     enabled</span><br><span class=line>cpuset    0       1       1</span><br><span class=line>cpu       4       1       1</span><br><span class=line>cpuacct   0       1       1</span><br><span class=line>devices   0       1       1</span><br><span class=line>freezer   0       1       1</span><br><span class=line>blkio     0       1       1</span><br></pre></td></tr></table></figure><blockquote><p>一个子系统最多只能附加到一个层级</p></blockquote></li><li><p>控制族群（control group）</p></li></ul><p>控制族群就是一组按照某种标准划分的进程。Cgroups 中的资源控制都是以控制族群为单位实现。一个进程可以加入到某个控制族群，也从一个进程组迁移到另一个控制族群。一个进程组的进程可以使用 cgroups 以控制族群为单位分配的资源，同时受到 cgroups 以控制族群为单位设定的限制.</p><figure class="highlight shell"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br></pre></td><td class=code><pre><span class=line>[root@buildroot cpu]# mkdir aaa</span><br><span class=line>[root@buildroot cpu]# mkdir bbb</span><br><span class=line>[root@buildroot cpu]# ls</span><br><span class=line>aaa/                   cgroup.sane_behavior   cpu.shares</span><br><span class=line>bbb/                   cpu.cfs_period_us      cpu.stat</span><br><span class=line>cgroup.clone_children  cpu.cfs_quota_us       notify_on_release</span><br><span class=line>cgroup.event_control   cpu.rt_period_us       release_agent</span><br><span class=line>cgroup.procs           cpu.rt_runtime_us      tasks</span><br><span class=line>[root@buildroot cpu]# ls aaa/ bbb/</span><br><span class=line>aaa/:</span><br><span class=line>cgroup.clone_children  cpu.cfs_quota_us       cpu.stat</span><br><span class=line>cgroup.event_control   cpu.rt_period_us       notify_on_release</span><br><span class=line>cgroup.procs           cpu.rt_runtime_us      tasks</span><br><span class=line>cpu.cfs_period_us      cpu.shares</span><br><span class=line></span><br><span class=line>bbb/:</span><br><span class=line>cgroup.clone_children  cpu.cfs_quota_us       cpu.stat</span><br><span class=line>cgroup.event_control   cpu.rt_period_us       notify_on_release</span><br><span class=line>cgroup.procs           cpu.rt_runtime_us      tasks</span><br><span class=line>cpu.cfs_period_us      cpu.shares</span><br></pre></td></tr></table></figure><ul><li>任务（task）<br>在 cgroups 中，任务就是系统的一个进程<figure class="highlight shell"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br></pre></td><td class=code><pre><span class=line>[root@buildroot cpu]# cat tasks</span><br><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br></pre></td></tr></table></figure></li></ul><h3 id=关系><a href=#关系 class=headerlink title=关系></a>关系</h3><ul><li>每次在系统中创建新层级时，该系统中的所有任务都是那个层级的默认 cgroup（我们称之为 <code>root cgroup</code>，此cgroup在创建层级时自动创建，后面在该层级中创建的cgroup都是此cgroup的后代）的初始成员;</li></ul><p><code>root cgroup:</code></p><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br></pre></td><td class=code><pre><span class=line>[root@buildroot mnt]# cat tasks</span><br><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>...</span><br></pre></td></tr></table></figure><p><code>subsys cgroup:</code></p><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br></pre></td><td class=code><pre><span class=line>[root@buildroot mnt]# mkdir aaa</span><br><span class=line>[root@buildroot mnt]# cd aaa/</span><br><span class=line>[root@buildroot aaa]# cat tasks</span><br></pre></td></tr></table></figure><ul><li>一子系统最多只能附加到一个层级;</li><li>一个层级可以附加多个子系统;</li><li>一个任务可以是多个cgroup的成员，但是这些cgroup必须在不同的层级;</li><li>系统中的进程（任务）创建子进程（任务）时，该子任务自动成为其父进程所在 cgroup的成员。然后可根据需要将该子任务移动到不同的 cgroup 中，但开始时它总是继承其父任务的cgroup。</li></ul><h2 id=限制cpu的资源><a href=#限制cpu的资源 class=headerlink title=限制cpu的资源></a>限制cpu的资源</h2><p>CPU资源的控制，主要是对CPU计算的控制，可以最大化的利用CPU资源。而<code>进程</code>是对CPU资源的利用实体。</p><h3 id=实时进程控制-–-系统整体><a href=#实时进程控制-–-系统整体 class=headerlink title="实时进程控制 – 系统整体"></a>实时进程控制 – 系统整体</h3><blockquote><p>控制实时进程的CPU资源占用</p></blockquote><ul><li>获取当前系统的设置<figure class="highlight shell"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br></pre></td><td class=code><pre><span class=line><span class="meta prompt_"># </span><span class=language-bash>sysctl -n kernel.sched_rt_period_us   <span class=comment># 实时进程调度的单位CPU时间 1 秒</span></span></span><br><span class=line>1000000</span><br><span class=line><span class="meta prompt_"># </span><span class=language-bash>sysctl -n kernel.sched_rt_runtime_us  <span class=comment># 实时进程在 1 秒中实际占用的CPU时间, 0.95秒</span></span></span><br><span class=line>950000</span><br></pre></td></tr></table></figure></li><li>设置实时进程占用CPU时间<figure class="highlight shell"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br></pre></td><td class=code><pre><span class=line><span class="meta prompt_"># </span><span class=language-bash>sysctl -w kernel.sched_rt_runtime_us=970000 <span class=comment># 设置实时进程每1秒中只占0.97秒的CPU时间</span></span></span><br><span class=line>kernel.sched_rt_runtime_us = 970000</span><br></pre></td></tr></table></figure><blockquote><p>sysctl -w : 临时修改指定参数的值</p></blockquote></li></ul><h3 id=实时进程控制-–-系统部分><a href=#实时进程控制-–-系统部分 class=headerlink title="实时进程控制 – 系统部分"></a>实时进程控制 – 系统部分</h3><blockquote><p>通过cgroup对一组进程中的实时进程的CPU资源进行控制.</p></blockquote><figure class="highlight shell"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br></pre></td><td class=code><pre><span class=line><span class="meta prompt_"># </span><span class=language-bash>mount -t cgroup cgroup -o cpu /mnt/</span></span><br><span class=line><span class="meta prompt_"># </span><span class=language-bash><span class=built_in>ls</span></span></span><br><span class=line>cgroup.clone_children  cpu.cfs_quota_us       notify_on_release</span><br><span class=line>cgroup.event_control   cpu.rt_period_us       release_agent</span><br><span class=line>cgroup.procs           cpu.rt_runtime_us      tasks</span><br><span class=line>cgroup.sane_behavior   cpu.shares</span><br><span class=line>cpu.cfs_period_us      cpu.stat</span><br><span class=line><span class="meta prompt_"># </span><span class=language-bash><span class=built_in>cat</span> cpu.rt_period_us cpu.rt_runtime_us</span></span><br><span class=line>1000000</span><br><span class=line>950000</span><br></pre></td></tr></table></figure><p>通过虚拟文件系统mount出CPU子系统，为CPU子系统的根节点，其可以控制整个系统的进程<code>tasks</code>,因此如果想对部分实时进程进行控制，需要创建子cgroup，并将需要控制的进程搬到新的cgroup中。</p><figure class="highlight shell"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br></pre></td><td class=code><pre><span class=line><span class="meta prompt_"># </span><span class=language-bash><span class=built_in>mkdir</span> rt_ctl</span></span><br><span class=line><span class="meta prompt_"># </span><span class=language-bash><span class=built_in>cd</span> rt_ctl/</span></span><br><span class=line><span class="meta prompt_"># </span><span class=language-bash><span class=built_in>echo</span> PID &gt; tasks</span></span><br><span class=line><span class="meta prompt_"># </span><span class=language-bash><span class=built_in>echo</span> 1000000 &gt; cpu.rt_period_us</span></span><br><span class=line><span class="meta prompt_"># </span><span class=language-bash><span class=built_in>echo</span> 920000 &gt; cpu.rt_runtime_us</span></span><br></pre></td></tr></table></figure><p>通过配置<code>cpu.rt_period_us</code>和<code>cpu.rt_runtime_us</code>就可以对<code> rt_ctl cgroup</code> 中的进程组中的实时进程进行CPU使用时间的控制.</p><p>在子cgroup中，对相关子系统进行修改时，该子系统的相关属性小于父cgroup属性的相应值。</p><figure class="highlight shell"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br></pre></td><td class=code><pre><span class=line><span class="meta prompt_"># </span><span class=language-bash><span class=built_in>echo</span> 960000 &gt; cpu.rt_runtime_us</span></span><br><span class=line>sh: write error: Invalid arguments</span><br></pre></td></tr></table></figure><h2 id=限制进程的内存资源><a href=#限制进程的内存资源 class=headerlink title=限制进程的内存资源></a>限制进程的内存资源</h2><p>内核配置：</p><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br></pre></td><td class=code><pre><span class=line>Location:</span><br><span class=line>  -&gt; General setup</span><br><span class=line>    -&gt; Control Group support (CGROUPS [=y])</span><br><span class=line>      -&gt; Resource counters (RESOURCE_COUNTERS [=y])</span><br><span class=line>        -&gt; Memory Resource Controller for Control Groups (MEMCG [=y])</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br></pre></td><td class=code><pre><span class=line><span class="meta prompt_"># </span><span class=language-bash>mount -t cgroup -o memory cgroup /mnt/</span></span><br><span class=line><span class="meta prompt_">#</span><span class=language-bash></span></span><br><span class=line><span class=language-bash><span class=comment># cd /mnt/</span></span></span><br><span class=line><span class="meta prompt_"># </span><span class=language-bash><span class=built_in>ls</span></span></span><br><span class=line>cgroup.clone_children               memory.kmem.usage_in_bytes</span><br><span class=line>cgroup.event_control                memory.limit_in_bytes</span><br><span class=line>cgroup.procs                        memory.max_usage_in_bytes</span><br><span class=line>cgroup.sane_behavior                memory.move_charge_at_immigrate</span><br><span class=line>memory.failcnt                      memory.oom_control</span><br><span class=line>memory.force_empty                  memory.pressure_level</span><br><span class=line>memory.kmem.failcnt                 memory.soft_limit_in_bytes</span><br><span class=line>memory.kmem.limit_in_bytes          memory.stat</span><br><span class=line>memory.kmem.max_usage_in_bytes      memory.swappiness</span><br><span class=line>memory.kmem.slabinfo                memory.usage_in_bytes</span><br><span class=line>memory.kmem.tcp.failcnt             memory.use_hierarchy</span><br><span class=line>memory.kmem.tcp.limit_in_bytes      notify_on_release</span><br><span class=line>memory.kmem.tcp.max_usage_in_bytes  release_agent</span><br><span class=line>memory.kmem.tcp.usage_in_bytes      tasks</span><br></pre></td></tr></table></figure><blockquote><p><code>memsw</code>:表示虚拟内存，不带<code>memsw</code>的仅包括物理内存</p></blockquote><ul><li><p><code>limit_in_bytes</code> 是用来限制内存使用 ,memory.memsw.limit_in_bytes 必须大于或等于 memory.limit_in_byte。要解除内存限制，对应的值设为 -1</p><blockquote><p>这种方式限制进程内存占用会有个风险。当进程试图占用的内存超过限制时，会触发 oom ，导致进程直接被杀，从而造成可用性问题。即使关闭控制组的 oom killer，在内存不足时，进程虽然不会被杀，但是会长时间进入 D 状态（等待系统调用的不可中断休眠），并被放到 OOM-waitqueue 等待队列中， 仍然导致服务不可用。因此，用 memory.limit_in_bytes 或 memory.memsw.limit_in_bytes 限制进程内存占用仅应当作为一个保险，避免在进程异常时耗尽系统资源</p></blockquote></li><li><p><code>memory.oom_control</code>：内存超限之后的OOM行为控制</p><figure class="highlight shell"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br></pre></td><td class=code><pre><span class=line><span class="meta prompt_"># </span><span class=language-bash><span class=built_in>cat</span> memory.oom_control</span></span><br><span class=line>oom_kill_disable 0</span><br><span class=line>under_oom 0</span><br></pre></td></tr></table></figure><blockquote><p>关闭oom killer： <code>oom_kill_disable为1</code></p></blockquote></li><li><p><code>memory.soft_limit_in_bytes</code>: memory.limit_in_bytes 的不同是，这个限制并不会阻止进程使用超过限额的内存，只是在系统内存足够时，会优先回收超过限额的内存，使之向限定值靠拢。</p></li><li><p><code>memory.usage_in_bytes</code>: 当前使用量</p></li><li><p><code>memory.max_usage_in_bytes</code>: 最高使用量</p></li><li><p><code>memory.failcnt</code>: 发生的缺页次数（申请内存失败的次数)</p></li><li><p><code>memory.stat</code>: 就是内存使用情况报告了。包括当前资源总量、使用量、换页次数、活动页数量等等</p></li></ul><h2 id=进程迁移><a href=#进程迁移 class=headerlink title=进程迁移></a>进程迁移</h2><p>在多核处理器时，如果想将一个进程指定到特定的CPU上进行执行，可通过<code>cpuset</code>子系统实现。</p><blockquote><p><code>cpuset</code>:针对 CPU 核心进行隔离，其实就是把要运行的进程绑定到指定的核心上运行，通过让不同的进程占用不同的核心，以达到运算资源隔离的目的。为cgroup中的任务分配独立<code>CPU（在多核系统）</code>和<code>内存节点</code>。</p></blockquote><ol><li>挂载 cgroup 文件系统, 并指定 -o cpuset</li><li>指定 A 的物理CPU为 0 (双核CPU的每个核编号分别是 CPU0, CPU1)</li><li>指定 B 的物理CPU也为 1</li></ol><figure class="highlight shell"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br></pre></td><td class=code><pre><span class=line><span class="meta prompt_"># </span><span class=language-bash>mount -t cgroup -o cpuset cgroup /mnt/</span></span><br><span class=line><span class="meta prompt_"># </span><span class=language-bash><span class=built_in>cat</span> cpuset.cpus cpuset.mems</span></span><br><span class=line>0-1</span><br><span class=line>0</span><br><span class=line><span class="meta prompt_"># </span><span class=language-bash><span class=built_in>cd</span> /mnt/</span></span><br><span class=line><span class="meta prompt_"># </span><span class=language-bash><span class=built_in>mkdir</span> A B <span class=comment># 创建子cgroup A 和 B</span></span></span><br><span class=line><span class="meta prompt_"># </span><span class=language-bash><span class=built_in>cat</span> A/cpuset.cpus</span></span><br><span class=line><span class="meta prompt_"></span></span><br><span class=line><span class="meta prompt_"># </span><span class=language-bash><span class=built_in>cat</span> B/cpuset.cpus</span></span><br><span class=line><span class="meta prompt_"></span></span><br><span class=line><span class="meta prompt_"># </span><span class=language-bash><span class=built_in>echo</span> 0 &gt; A/cpuset.cpus <span class=comment># 设置A组绑定到CPU0</span></span></span><br><span class=line><span class="meta prompt_"># </span><span class=language-bash><span class=built_in>echo</span> 1 &gt; B/cpuset.cpus <span class=comment># 设置B组绑定到CPU1</span></span></span><br><span class=line><span class="meta prompt_"># </span><span class=language-bash><span class=built_in>echo</span> 0 &gt; A/cpuset.mems <span class=comment># 设置A组绑定内存</span></span></span><br><span class=line><span class="meta prompt_"># </span><span class=language-bash><span class=built_in>echo</span> 0 &gt; B/cpuset.mems <span class=comment># 设置A组绑定内存</span></span></span><br><span class=line><span class="meta prompt_"># </span><span class=language-bash><span class=built_in>echo</span> pid1 &gt; A/tasks <span class=comment>#将B组进程迁入A组</span></span></span><br><span class=line><span class="meta prompt_"># </span><span class=language-bash><span class=built_in>echo</span> pid2 &gt; B/tasks <span class=comment>#将A组进程迁入B组</span></span></span><br></pre></td></tr></table></figure><blockquote><figure class="highlight shell"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br></pre></td><td class=code><pre><span class=line><span class="meta prompt_">&gt;</span><span class=language-bash><span class=comment># echo $$ &gt; tasks</span></span></span><br><span class=line><span class="meta prompt_">&gt;</span><span class=language-bash>sh: write error: No space left on devices</span></span><br></pre></td></tr></table></figure><p><strong>原因</strong>：没有配置<code>cpuset.mems</code></p></blockquote><h3 id=应用实例><a href=#应用实例 class=headerlink title=应用实例></a>应用实例</h3><blockquote><p>ltp-full-20140115&#x2F;testcases&#x2F;kernel&#x2F;controllers&#x2F;cpuctl&#x2F;cpuctl_test02.c</p></blockquote><h2 id=参考><a href=#参考 class=headerlink title=参考></a>参考</h2><ol><li><span class=exturl data-url="aHR0cHM6Ly93d3cuaWJtLmNvbS9kZXZlbG9wZXJ3b3Jrcy9jbi9saW51eC8xNTA2X2Nncm91cC8=">CGroup 介绍、应用实例及原理描述<i class="fa fa-external-link-alt"></i></span></li><li><span class=exturl data-url=aHR0cHM6Ly9hY2Nlc3MucmVkaGF0LmNvbS9kb2N1bWVudGF0aW9uL3poLWNuL3JlZF9oYXRfZW50ZXJwcmlzZV9saW51eC82L2h0bWwvcmVzb3VyY2VfbWFuYWdlbWVudF9ndWlkZS9jaDAx>控制族群（CGROUP）<i class="fa fa-external-link-alt"></i></span></li><li><span class=exturl data-url="aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGp5MTk4ODEyMy9hcnRpY2xlL2RldGFpbHMvNDgwMzI1Nzc=">Linux内核工程导论——CGroup子系统<i class="fa fa-external-link-alt"></i></span></li><li><span class=exturl data-url=aHR0cDovL2Jsb2cuY3Nkbi5uZXQvYXJub2xkbHUvYXJ0aWNsZS9kZXRhaWxzLzUyOTQ1MjUy>Linux资源控制-使用cgroup控制CPU和内存<i class="fa fa-external-link-alt"></i></span></li><li><span class=exturl data-url="aHR0cHM6Ly93d3cuamlhbnNodS5jb20vcC9kYzMxNDA2OTllNzk=">cgroup实践-资源控制<i class="fa fa-external-link-alt"></i></span></li><li><span class=exturl data-url="aHR0cHM6Ly93d3cuY25ibG9ncy5jb20vYWNvb2wvcC82ODUyMjUwLmh0bWw=">cgroup原理简析:vfs文件系统<i class="fa fa-external-link-alt"></i></span></li><li><span class=exturl data-url="aHR0cDovL3d3dy5pbmZvcS5jb20vY24vYXJ0aWNsZXMvZG9ja2VyLWtlcm5lbC1rbm93bGVkZ2UtY2dyb3Vwcy1yZXNvdXJjZS1pc29sYXRpb24=">Docker背后的内核知识——cgroups资源限制<i class="fa fa-external-link-alt"></i></span></li><li><span class=exturl data-url=aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2prMTk4MzEwL2FydGljbGUvZGV0YWlscy85Mjg4ODc3>Linux cgroup机制分析之框架分析<i class="fa fa-external-link-alt"></i></span></li></ol></div><footer class=post-footer><div class=post-copyright><ul><li class=post-copyright-author><strong>本文作者：</strong>winddoing</li><li class=post-copyright-link><strong>本文链接：</strong> <a href=https://winddoing.github.io/post/10807.html title=Cgroup>https://winddoing.github.io/post/10807.html</a></li><li class=post-copyright-license><strong>版权声明：</strong>本博客所有文章除特别声明外，均采用 <span class=exturl data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC8="><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</span> 许可协议。转载请注明出处！</li></ul></div><div class=post-tags><a href="/tags/linux/" rel=tag><i class="fa fa-tag"></i> linux</a> <a href="/tags/cgroup/" rel=tag><i class="fa fa-tag"></i> cgroup</a></div><div class=post-nav><div class=post-nav-item><a href=/post/18938.html rel=prev title=Linux内存的VM参数><i class="fa fa-chevron-left"></i> Linux内存的VM参数</a></div><div class=post-nav-item><a href=/post/53957.html rel=next title=OOM>OOM <i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><div class="comments utterances-container"></div></div></main><footer class=footer><div class=footer-inner><div class=copyright>&copy; 2014 – <span itemprop=copyrightYear>2023</span> <span class=with-love><i class="fa fa-heart"></i></span> <span class=author itemprop=copyrightHolder>winddoing</span></div><div class=wordcount><span class=post-meta-item><span class=post-meta-item-icon><i class="fa fa-chart-line"></i></span> <span title=站点总字数>1.1m</span></span> <span class=post-meta-item><span class=post-meta-item-icon><i class="fa fa-coffee"></i></span> <span title=站点阅读时长>16:21</span></span></div><div class=busuanzi-count><span class=post-meta-item id=busuanzi_container_site_uv><span class=post-meta-item-icon><i class="fa fa-users"></i></span> <span class=site-uv title=总访客量><span id=busuanzi_value_site_uv></span></span></span> <span class=post-meta-item id=busuanzi_container_site_pv><span class=post-meta-item-icon><i class="fa fa-eye"></i></span> <span class=site-pv title=总访问量><span id=busuanzi_value_site_pv></span></span></span></div><div class=powered-by>由 <span class=exturl data-url=aHR0cHM6Ly9oZXhvLmlv>Hexo</span> & <span class=exturl data-url="aHR0cHM6Ly90aGVtZS1uZXh0LmpzLm9yZy9taXN0Lw==">NexT.Mist</span> 强力驱动</div></div></footer><script src=https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/next-theme-pjax/0.5.0/pjax.min.js integrity="sha256-3NkoLDrmHLTYj7csHIZSr0MHAFTXth7Ua/DDt4MRUAg=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/lozad.js/1.16.0/lozad.min.js integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/pangu/4.0.7/pangu.min.js integrity="sha256-j+yj56cdEY2CwkVtGyz18fNybFGpMGJ8JxG3GSyO2+I=" crossorigin=anonymous></script><script src=/js/comments.js></script><script src=/js/utils.js></script><script src=/js/motion.js></script><script src=/js/schemes/muse.js></script><script src=/js/next-boot.js></script><script src=/js/pjax.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.0/search.js integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin=anonymous></script><script src=/js/third-party/search/local-search.js></script><script class=next-config data-name=pdf type=application/json>{"object_url":{"url":"https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.2.8/pdfobject.min.js","integrity":"sha256-tu9j5pBilBQrWSDePOOajCUdz6hWsid/lBNzK4KgEPM="},"url":"/lib/pdf/web/viewer.html"}</script><script src=/js/third-party/tags/pdf.js></script><script class=next-config data-name=mermaid type=application/json>{"enable":true,"theme":{"light":"default","dark":"dark"},"js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mermaid/9.1.1/mermaid.min.js","integrity":"sha256-8L3O8tirFUa8Va4NSTAyIbHJeLd6OnlcxgupV9F77e0="}}</script><script src=/js/third-party/tags/mermaid.js></script><script src=/js/third-party/fancybox.js></script><script data-pjax async src=https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script><script class=next-config data-name=leancloud_visitors type=application/json>{"enable":true,"app_id":"Q8qpjA3fOO7FEUBqcmcQFptF-gzGzoHsz","app_key":"tgUTq5bX3fVmn916EMRe65eJ","server_url":null,"security":false}</script><script src=/js/third-party/statistics/lean-analytics.js></script><script class=next-config data-name=enableMath type=application/json>false</script><script class=next-config data-name=mathjax type=application/json>{"enable":true,"tags":"none","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.1/es5/tex-mml-chtml.js","integrity":"sha256-hlC2uSQYTmPsrzGZTEQEg9PZ1a/+SV6VBCTclohf2og="}}</script><script src=/js/third-party/math/mathjax.js></script><script class=next-config data-name=utterances type=application/json>{"enable":true,"repo":"Winddoing/winddoing.github.io","issue_term":"title","theme":"github-light"}</script><script src=/js/third-party/comments/utterances.js></script></body></html>