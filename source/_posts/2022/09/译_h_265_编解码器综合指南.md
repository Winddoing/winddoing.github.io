---
layout: post
title: '[译] H.265编解码器综合指南'
date: '2022-09-02 14:18'
tags:
  - h265
categories:
  - 多媒体
  - H265
abbrlink: 5946407e
---

> 原文：https://www.gumlet.com/learn/what-is-h265/

## 什么是 H.265？

H.265 是一种视频压缩编解码器，是H.264的继承者。 它建立在类似于其前身的概念之上，但由于各地迅速采用4K内容，它变得越来越流行。 在不影响视频质量的情况下，H.265允许以其前身H.264的一半比特率进行视频压缩，使其理论上效率提高一倍。当我们将H.265压缩到与H.264相同的比特率时，我们发现H.265提供了显着改进的视频质量。 由于所有这些优势和升级，H.265使流式传输和下载4K视频变得更加容易——这在H.264中是不可能的，因为它占用了大量空间并且具有高比特率。

<!--more-->

## H.265编解码器如何工作？

H.265编解码器基于与以前的H.264标准相同的一般思路和结构。 如前所述，它的源视频由一系列由编码器编码（或压缩）的帧组成，这会产生压缩的比特流。这个压缩的比特流要么被存储，要么被共享，另一端的解码器解压比特流以创建原始的帧序列。

在H.265`编码器`工作方面，编码器执行的步骤包括：

- 第一步是预测每个单元并执行必要的计算（即从原始图片单元中减去它）。在此步骤中，编码器接收一帧`16x16`显示像素（宏块）的视频单元。该宏块以两种方式形成预测,从当前帧（帧内预测）或从先前传输的帧（传输间）。

- 量化和变换残差。残差是指预测与原始图片单元之间的差异。这是通过使用离散余弦变换的近似形式来输出一组系数来完成的，每个系数都与基本模式的加权值有关。这些基础模式稍后可以组合起来以创建初始残差。

- 对变换后的输出、模式信息、预测信息和标头进行熵编码（即执行无损数据压缩方案）。

另一方面，H.265`解码器`执行以下步骤:

- 熵解码——即反转熵编码期间执行的步骤，并从编码的序列中提取原始元素。
- 反转变换和重新缩放。
- 预测每个单元并将其添加到逆变换的输出中
- 重建最终解码的视频图像。

从本质上讲，不是对每一帧的每个像素进行编码，而是通过识别静态区域而不是逐帧变化来最小化带宽使用。这确保了编码工作可以更好地应用于每帧都在变化的区域。

如果我们从更技术的角度来看，从计算能力的角度来看，我们发现HEVC要求更高，但它为视频编解码提供了更加智能的方法。H.265通过寻找帧内的重叠空间来工作。有了这些信息，H.265寻找机会不在一系列帧上发送相同的信息。H.265可以发送第一个完整帧，而不是按顺序发送每个单独的图像，如果它在这些帧的空间内发现任何重复，它不会再次发送这些帧。这导致总文件大小的整体减小。从本质上讲，H.265的工作原理是提高空间和运动分辨率估计的复杂程度，从而可以阻止重复信息的发送，并且可以进一步压缩大小。

![H265 Encoder Decoder](/images/2022/09/h265_encoder_decoder.png)


## H.265/HEVC概述

用于视频压缩的HEVC标准有可能提供远远优于其前身（如H.264/AVC）的性能。虽然HEVC具有与AVC和MPEG-2相同的核心结构，但它也有许多增量和急需的改进，例如：

- 增加了分区的灵活性。
- 在转换块大小和预测模式方面具有更大的灵活性。
- 更好的插值和去块滤波器。
- 改进了模式和运动矢量的信令。
- 高效的并行处理功能。

所有这些共同产生了一种视频编码格式，即使对于最高端的视频类型，它也能提供更好的压缩而不影响质量。以下是您需要了解的有关H.265视频压缩格式的其他重要方面的简要概述。

### Profile, levels, and parameters

Profile可以简单地理解为编码所需的一组工具，用于创建与该特定Profile相关的比特流。 特定Profile的编码器可以选择它需要使用的编码工具，以生成相关的比特流。 另一方面，特定Profile的解码器必须支持该Profile可以使用的所有编码工具。

> Profile:可以翻译成配置文件、档次等

进入更多技术细节，HEVC 的第一个版本定义了三个配置文件：

- Main
- Main 10
- Main Still Picture.

第二个版本添加了`21`个范围扩展Profile、一个多视图Profile和两个可扩展扩展Profile。这进一步经历了一些变化和修改。

在Tiers和Level方面，HEVC标准定义了两个main tiers: High和Main。 它还定义了`13`个levels。 Level本质上是比特流的一组约束。 对于低于4的级别，仅允许主层。开发这些层是为了处理具有不同最大比特率的应用程序。主层的设计考虑了大多数应用程序，而高级层则迎合了更高端的应用程序。符合给定级别/层的解码器应该能够轻松解码为该特定级别/层和所有较低级别/层编码的所有比特流。


### h.265的应用

H.265编解码器使用不同于H.264的`宏块编码方法`，称为`编码树单元 (CTU，Coding Tree Units)`。 CTU以更高的编码效率处理信息，并支持`64x64`宏块。这使得H.265 式在许多应用中非常有用。 一些此类应用包括：

- H.265支持广泛的色彩空间， 例如 NTSC、Rec. 601、PAL、通用胶片、SMPTE 170M、sRGN、sYCC 等。
- 用于下一代HDTV（高清晰度电视）显示器和内容捕获系统的无缝流媒体和数据共享。

### 为什么要进行h.265压缩？

这个问题的简单答案是*提高效率*。 编解码器在不牺牲图像质量的情况下用于压缩和解压缩图像的比特流越少，其效率就越高。从这个角度来看，H.265比H.264编解码器效率更高。除此之外，随着事物的发展，人们的观看分辨率也发生了变化，人们用于观看视频的屏幕分辨率也发生了变化。 有如此多的限制和修改，转向一种专为现代视频需求而设计的压缩技术是有意义的。


### h.265的好处

总而言之，以下是H.265压缩标准提供的主要优势和改进：

- 提供 H.264 一半的压缩比。
- 与H.264支持的16x16相比，支持64x64像素宏块。
- 视频压缩依赖于帧之间的预测运动，而H.265具有更好的运动预测机制。这导致改进的压缩标准。
- 帧间预测在H.265中比在H.264中更详细。
- H.265支持的分辨率远高于H.264支持的8K超高清。
- 与H.264编解码器相比，H.265的比特率要低得多，从而使整个过程更加高效。
