---
title: 新一代视频压缩编码标准H.264
date: 2022-10-12 10:07:24
comments: false
---

电子书：[新一代视频压缩编码标准H.264](https://winddoing.coding.net/p/blog/d/docs/git/raw/master/multimedia/%E6%96%B0%E4%B8%80%E4%BB%A3%E8%A7%86%E9%A2%91%E5%8E%8B%E7%BC%A9%E7%BC%96%E7%A0%81%E6%A0%87%E5%87%86H.264.pdf)


# 绪论


# 数字视频


# 视频压缩编码的基本原理

## 预测编码

## 变换编码

## 变换编码与预测编码的比较

## 熵编码

利用信源的统计特性进行码率压缩的编码就称为`熵编码`，也叫`统计编码`。视频编码常用的有两种：`变长编码（也称哈夫曼编码）`和`算术编码`

### 变长编码

哈夫曼提出变长编码方法：对出现概率大的符号分配短字长的二进制码，对出现概率小的符号分配长字长的二进制码，得到符号平均码长最短的码。


### 算术编码

### CABAC编码

CABAC采用的是二进制算术编码，在编码过程中需要传入二进制串，输出的也是二进制串


# 视频编码标准简介


# H264/AVC编码器原理

## H264/AVC的结构

### 名词解释

- 场和帧
  - 场编码：最早模拟视频，都是隔行扫描，以奇数行和偶数行为根据分开扫描
  - 帧编码：现在采用数字视频后，都是帧编码。场编码的存在只是为了和老技术兼容

- 宏块、切片
  - 宏块（MB）：图像处理的基本单元，一个宏块由一个16x16亮度像素和附加一个8x8Cb和一个8x8Cr彩色像素块组成。
  - 切片（slice）：若干宏块组成切片，一帧图像可以被分为一个或多个切片，每个切片包含整数个宏块（MB），即每个切片至少一个MB。


## H.264 的 SP/SI 帧技术（ SP 片或 SI 宏块的 P 宏块）


## 整数变换与量化

`变换编码`将图像`时域信号`变换成`频域信号`，在频域中图像信号能量大部分集中在低频区域，相对时域信号，码率有较大的下降.

H.264对图像或预测残差采用了4×4整数`离散余弦变换`(DCT)技术，避免了以往标准中使用的通用8×8离散余弦变换逆变换经常出现的失配问题。

`量化`过程根据图像的动态范围大小确定量化参数，既保留图像必要的细节，又减少码流。

## CAVLC(基于上下文自适应的可变长编码)

`熵编码`是`无损压缩`编码方法，它生成的码流可以经解码无失真地恢复出原数据。


## 其余特征

### 参考图像管理

### 重排序


# H264的句法和语义

## 句法（syntax）

### 句法元素的分层结构

![h264 syntax struct](/images/2022/10/h264_syntax_struct.png)

在H.264中，句法元素共被组织成`序列`、`图像`、`片`、`宏块`、`子宏块`五个层次。

![H.264 中句法元素的分层结构](/images/2022/10/h_264_中句法元素的分层结构.png)

在H.264中，分层结构最大的不同是取消了序列层和图像层，并将原本属于序列和图像头部的大部分句法元素游离出来形成`序列`和`图像`两级参数集(也就是SPS和PPS)，其余的部分则放入片层。

参数集（Parameter Set）只是在片（slice）层需要时被引用；而且，一个参数集并不对应某个特定的图像或序列，同一个`序列参数集`（SPS）可以被多个序列中的`图像参数集`(PPS)引用，同理，同一个`图像参数集`(PPS)也可以被多个`图像`（frame，图像帧）引用。只在编码器认为需要更新参数集的内容时，才会发送出新的参数集。在这种机制下，由于参数集是独立的，可以被多次重发或者采用特殊技术加以保护。

切片（slice）的目的：**在错误发生时防止错误扩散、减少冗余信息提高编码效率**。

![H.264 码流中的数据单位](/images/2022/10/h_264_码流中的数据单位.png)

H.264引入IDR（Instantaneous Decoding Refresh，即时解码刷新）图像是为了解码的重同步，当解码器解码到IDR图像时，立即将`参考帧队列`清空，将已解码的数据全部输出或抛弃，重新查找参数集，开始一个新的序列。
IDR帧一定是I帧，但是I帧不一定是IDR帧。

### 句法的表示方法

#### 描述子

描述子是指**从比特流提取句法元素的方法**，即句法元素的解码算法，每个句法元素都有相对应的描述子。

由于H.264编码的最后一步是熵编码，所以这里的描述子大多是熵编码的解码算法。 H.264定义了如下几种描述子：
- `ae(v)` 基于上下文自适应的二进制算术熵编码
- `b(8)` 读进连续的 8 个比特
- `ce(v)` 基于上下文自适应的可变长熵编码
- `f(n)` 读进连续的 n 个比特
- `i(n)/i(v)` 读进连续的若干比特，并把它们解释为有符号整数
- `me(v)` 映射指数 Golomb 熵编码
- `se(v)` 有符号指数 Golomb 熵编码
- `te(v)` 截断指数 Golomb 熵编码
- `u(n)/u(v)` 读进连续的若干比特，并将它们解释为无符号整数
- `ue(v)` 无符号指数 Golomb 熵编码


# H264/AVC解码器的原理和实现



# H264视频编码传输及其在移动通信中的应用



# 高质量视频编码



# H264的可伸缩编码SVC



# 附录
