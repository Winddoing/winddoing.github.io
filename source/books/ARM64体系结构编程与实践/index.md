---
title: ARM64体系结构编程与实践
date: 2022-10-21 14:07:24
comments: false
---


## ARM64体系结构基础知识

ARM体系结构是一种硬件规范，主要是用来约定指令集、芯片内部体系结构（如内存管理、高速缓存管理）等。

### ARMv8体系结构基础知识

ARMv8体系结构除了提高处理能力外，还引入了一些新特性
- 具有超大物理地址（physical address）空间，提供超过4GB物理内存的访问
- 具有64位宽的虚拟地址（virtual address）空间。
- 提供31个64位宽的通用寄存器，可以减少对栈的访问，从而提高性能。
- 提供16KB和64KB的页面，有助于降低TLB的未命中率（miss rate）
- 具有全新的异常处理模型，有助于降低操作系统和虚拟化的实现复杂度
- 具有全新的加载-获取指令（Load-Acquire Instruction）、存储-释放指令（Store-Release Instruction），专门为C++11、C11以及Java内存模型设计  ？？

#### 基本概念

> A64指令集宽度是32位，而不是64位



#### 处理器执行状态

AArch64状态的异常等级（exception level）
- EL0：用户特权，由于运行普通用户程序
- EL1：系统特权，通常由于操作系统内核，如果系统是能了虚拟化扩展，运行虚拟机操作系统内核。
- EL2：运行虚拟化扩展的虚拟机监控器（hypervisor）
- EL3：运行安全时间中的安全监控器（secure monitor）

#### 寄存器

##### 通用寄存器

aarch64执行状态支持`31`个`64`位`通用寄存器，分别是`X0~X30`寄存器；而aarch32状态支持`16`个`32位`通用寄存器，分别是`R0~R15`寄存器。

在aarch64状态下，用X表示64位通用寄存器，用W表示低32位数据，比如W0表示X0寄存器的低32位数据。



##### 处理器状态



##### 特殊寄存器





## 实验环境——Qemu



## A64指令集


